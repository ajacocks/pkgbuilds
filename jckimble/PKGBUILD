# Contributor: James C Kimble <me@jckimble.com>
pkgbase='jckimble'
pkgname=(jckimble-keyring jckimble-laptop)
pkgver=20220721060440
pkgrel=1
pkgdesc="MetaPackages Including Keyring"
arch=(any)
url="https://github.com/jckimble/pkgbuilds"
groups=(jckimble)
license=('ISC')
source=(
  #Keyring
  public.gpg 
  #base
  reflector.hook wheel
  #desktop
  20-quiet-printk.conf custom.conf dnsmasq.conf dns.conf
  #laptop
  wol-disable.service laptop.conf
  )
sha256sums=(
  SKIP
  SKIP SKIP
  SKIP SKIP SKIP SKIP
  SKIP SKIP
  )
depends=()

pkgver() {
  date +%Y%m%d%H%M%S
}

package_jckimble-keyring() {
  echo "package"
  install=jckimble-keyring.install
  depends=(pacrepo-cli)
  install -dm 7555 "${pkgdir}/usr/share/jckimble-keyring"
	install -Dm755 "public.gpg" "${pkgdir}/usr/share/jckimble-keyring/public.gpg"
}

package_jckimble-laptop(){
  install=jckimble-laptop.install

  #core settings
  depends=(jckimble-keyring sudo vim weechat tmux yay zsh)
  install -Dm 0644 wheel "${pkgdir}/etc/sudoers.d/wheel"
  install -Dm 0644 20-quiet-printk.conf "${pkgdir}/etc/sysctl.d/20-quiet-printk.conf"
  install -Dm 0644 laptop.conf "${pkgdir}/etc/sysctl.d/laptop.conf"
  install -Dm 0755 wol-disable.service "${pkgdir}/etc/systemd/system/wol-disable.service"
  install -Dm 0644 custom.conf "${pkgdir}/etc/tmpfiles.d/custom.conf"

  #desktop
  depends+=(gnome gnome-extra google-chrome transmission-gtk gimp redshift visual-studio-code-bin ngrok kr-bin docker)

  #NetworkManager
  depends+=(dnsmasq networkmanager reflector iptables)

  install -Dm 0644 dnsmasq.conf "${pkgdir}/etc/NetworkManager/dnsmasq.d/dnsmasq.conf"
  install -Dm 0644 dns.conf "${pkgdir}/etc/NetworkManager/conf.d/dns.conf"

  install -Dm 0644 reflector.hook "${pkgdir}/usr/share/libalpm/hooks/reflector.hook"

  #games
  depends+=(snes9x-gtk vbam-wx pcsxr joyutils)
}
